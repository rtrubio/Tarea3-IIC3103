[{"/Users/rodrigorubio/Desktop/Tarea3/my-app/src/index.js":"1","/Users/rodrigorubio/Desktop/Tarea3/my-app/src/reportWebVitals.js":"2","/Users/rodrigorubio/Desktop/Tarea3/my-app/src/App.js":"3","/Users/rodrigorubio/Desktop/Tarea3/my-app/src/components/MapView.js":"4","/Users/rodrigorubio/Desktop/Tarea3/my-app/src/components/Markers.js":"5","/Users/rodrigorubio/Desktop/Tarea3/my-app/src/components/Airplanes.js":"6","/Users/rodrigorubio/Desktop/Tarea3/my-app/src/components/Socket.js":"7","/Users/rodrigorubio/Desktop/Tarea3/my-app/src/components/Chat.js":"8"},{"size":500,"mtime":1621208825000,"results":"9","hashOfConfig":"10"},{"size":362,"mtime":1621208825000,"results":"11","hashOfConfig":"10"},{"size":4010,"mtime":1621807896000,"results":"12","hashOfConfig":"10"},{"size":529,"mtime":1621442691000,"results":"13","hashOfConfig":"10"},{"size":372,"mtime":1621456124000,"results":"14","hashOfConfig":"10"},{"size":397,"mtime":1621454180000,"results":"15","hashOfConfig":"10"},{"size":159,"mtime":1621446169000,"results":"16","hashOfConfig":"10"},{"size":1662,"mtime":1621807248000,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"1rsypxn",{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"25"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"20"},"/Users/rodrigorubio/Desktop/Tarea3/my-app/src/index.js",[],["38","39"],"/Users/rodrigorubio/Desktop/Tarea3/my-app/src/reportWebVitals.js",[],"/Users/rodrigorubio/Desktop/Tarea3/my-app/src/App.js",["40","41"],"import './App.css';\nimport React from 'react'\nimport io from 'socket.io-client';\n//import MapView from './components/MapView';\nimport { useState, useEffect } from 'react';\nimport socket from './components/Socket';\nimport Chat from './components/Chat';\n\n// imports de MapView.js y Markers.js\nimport { Map, TileLayer, Marker, Popup, Polyline} from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css'\nimport {Airplanes} from './components/Airplanes'\n\n//const io = require('socket.io-client')\n//const socket = io('wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl', {\n//    path: \"/flights\"\n//});\n\nfunction App() {\n\n  const info_vuelos = [];\n  // aca van los useState\n  const [positions, setPositions] = useState([]);\n  const [flights, setFlights] = useState([]);\n  const [aux, setAux] = useState(\"\");\n\n  const pos_actual = positions;\n\n  const [name, setName] = useState(\"\");\n  const [registered, setRegistered] = useState(false);\n\n  const register = (e) => {\n    e.preventDefault();\n    if(name !== \"\"){\n      setRegistered(true)\n    }\n  }\n  \n  //const polyline = [\n  //  [51.52437, 13.7888],\n  //  [40.51, 13.41053],\n  //];\n\n  useEffect(() => {\n    //console.log('emitiendo un vuelo');\n    socket.emit('FLIGHTS');\n    //console.log('vuelo emitido');\n  }, [] );\n\n  useEffect(() => {\n    socket.on('POSITION', vuelo => {\n      //console.log('nuevas posiciones de vuelos');\n      //const pos_actual = positions;\n      pos_actual[vuelo.code] = vuelo;\n      setPositions(pos_actual);\n      //console.log(positions)\n      //console.log(pos_actual);\n      setAux(vuelo)\n    });\n\n    socket.on('FLIGHTS', function(data){\n      //console.log('info del vuelo');\n      //console.log(data);\n      //console.log('fin info del vuelo');\n\n      info_vuelos.push(data);\n      setFlights(info_vuelos[0]);\n\n      //console.log('print flights');\n      //console.log(flights);\n      //console.log('fin print flights');\n      \n      //Object.values(flights).map((airp) => (\n      //  console.log([airp.origin, airp.destination])\n      //))\n    });\n    //return () => {socket.off()}\n  }, [aux] );\n\n\n  return(\n    <div>\n\n    <Map center={{lat: '-33.57833835625107', lng: '-66.63795402257144'}} zoom={4}>\n      <TileLayer \n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n      />\n      {Object.values(positions).map((item) => (\n          <Marker position={item.position} icon={Airplanes}>\n              <Popup>\n                  {item.code}\n              </Popup>\n          </Marker>\n      ))}\n      {Object.values(flights).map((info) => (\n          <Polyline positions={[info.origin, info.destination]} color={'red'}>\n\n          </Polyline>\n      ))}\n    </Map>\n\n      {\n        !registered &&\n\n        <form onSubmit={register}>\n          <label htmlFor=\"\">Introduzca nombre para acceder al Chat</label>\n          <input value={name} onChange={e => setName(e.target.value)}/>\n          <button>Ingresar</button>\n        </form>\n      }\n\n      {\n        registered &&\n        <Chat nombre={name}></Chat>\n      }\n\n      {Object.values(flights).map((info) => (\n        <ul>\n          <li><b>Airline</b>: {info.airline}</li>\n          <li><b>Code</b>: {info.code}</li>\n          <li><b>Plane</b>: {info.plane}</li>\n          <li><b>Origin</b>: {info.origin}</li>\n          <li><b>Destination</b>: {info.destination}</li>\n          <li><b>Seats</b>: {info.seats}</li>\n          <li><b>Passengers</b>:</li>\n          {Object.values(info.passengers).map((psj) => (\n            <ul>\n              <li>{psj.name}: {psj.age} a√±os</li>\n            </ul>\n          ))}\n        </ul>\n      ))}\n    \n    </div>\n  );\n\n};\n\nexport default App;\n\n/*\n<Polyline positions={polyline}></Polyline>\n\n{Object.values(flights).map((info) => (\n  <Polyline position={[info.origin, info.destination]} color={'red'}></Polyline>\n))}\n\n{flights.map((info) => (\n    <Polyline position={[info.origin, info.destination]} color={'red'}></Polyline>\n))}\n*/","/Users/rodrigorubio/Desktop/Tarea3/my-app/src/components/MapView.js",[],["42","43"],"/Users/rodrigorubio/Desktop/Tarea3/my-app/src/components/Markers.js",[],"/Users/rodrigorubio/Desktop/Tarea3/my-app/src/components/Airplanes.js",[],"/Users/rodrigorubio/Desktop/Tarea3/my-app/src/components/Socket.js",[],"/Users/rodrigorubio/Desktop/Tarea3/my-app/src/components/Chat.js",["44","45"],"import React, { useState, useEffect, useRef } from 'react';\n//import Socket from './Socket';\nimport socket from './Socket';\nimport '../App.css';\n\nconst Chat = ({ nombre }) => {\n    const [message, setMessage] = useState(\"\");\n    const [messages, setMessages] = useState([]);\n\n    //useEffect(() => {\n    //    socket.emit('CHAT', 'nombre');\n    //}, [nombre]);\n\n    //useEffect(() => {\n    //    socket.on('CHAT', mensaje => {\n    //        setMessages([...messages, mensaje]);\n    //    })\n    //    return () => {socket.off()}\n    //}, [messages])\n\n    useEffect(() => {\n        socket.on('CHAT', function(data){\n            console.log('hola')\n            messages.push(data);\n            console.log(messages)\n        })\n        return () => {socket.off()}\n    }, [messages])\n\n\n\n    const submit = (e) => {\n        e.preventDefault();\n        const msj = {};\n        msj['name'] = nombre;\n        msj['message'] = message;\n        console.log(msj)\n        socket.emit('CHAT', msj)\n    }\n\n    return(\n        <div>\n            <div className=\"chat\">\n                {Object.values(messages).map((info) => (\n                    <p>{info.date}-<b>{info.name}</b>:{info.message}</p>\n                ))}\n            </div>\n            <form onSubmit={submit}>\n                <label htmlFor=\"\">Escriba su mensaje</label>\n                <textarea name=\"\" id=\"\" cols=\"20\" rows=\"5\" value={message} onChange={e => setMessage(e.target.value)}>\n\n                </textarea>\n                <button>Enviar</button>\n            </form>\n        </div>\n    )\n}\n\nexport default Chat;\n\n//{messages.map((e, i) => <div key={i}><div>{e.name}</div><div>{e.message}</div></div>)}",{"ruleId":"46","replacedBy":"47"},{"ruleId":"48","replacedBy":"49"},{"ruleId":"50","severity":1,"message":"51","line":3,"column":8,"nodeType":"52","messageId":"53","endLine":3,"endColumn":10},{"ruleId":"54","severity":1,"message":"55","line":78,"column":6,"nodeType":"56","endLine":78,"endColumn":11,"suggestions":"57"},{"ruleId":"46","replacedBy":"58"},{"ruleId":"48","replacedBy":"59"},{"ruleId":"50","severity":1,"message":"60","line":1,"column":38,"nodeType":"52","messageId":"53","endLine":1,"endColumn":44},{"ruleId":"50","severity":1,"message":"61","line":8,"column":22,"nodeType":"52","messageId":"53","endLine":8,"endColumn":33},"no-native-reassign",["62"],"no-negated-in-lhs",["63"],"no-unused-vars","'io' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'info_vuelos' and 'pos_actual'. Either include them or remove the dependency array.","ArrayExpression",["64"],["62"],["63"],"'useRef' is defined but never used.","'setMessages' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"65","fix":"66"},"Update the dependencies array to be: [aux, info_vuelos, pos_actual]",{"range":"67","text":"68"},[2066,2071],"[aux, info_vuelos, pos_actual]"]